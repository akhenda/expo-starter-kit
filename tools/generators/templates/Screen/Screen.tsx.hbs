import { useState } from 'react';
import { ScrollView } from 'react-native';
import { Button, Text, View } from 'react-native-ui-lib';
import { useNavigation } from '@react-navigation/native';
import isEqual from 'lodash/isEqual';

import { SafeAreaView, SaveAreaInset } from '@src/components';
import { PaletteIcon } from '@src/components/Icons';
import logger from '@src/services/logger';
import { actions, useTrackedStore } from '@src/stores';

import { $container } from './{{pascalCase name}}.styles';
import type { {{pascalCase name}}Props } from './{{pascalCase name}}.types';

type ButtonProps = {
  label?: string;
  round?: boolean;
};

const labelButton = { label: 'Change Theme' };
const iconButton = { round: true };

const {{pascalCase name}} = ({ style: $style }: {{pascalCase name}}Props) => {
  const navigation = useNavigation();
  const theme = useTrackedStore().app.theme();
  const [buttonProps, setButtonProps] = useState<ButtonProps>(labelButton);

  const onChangeTheme = () => {
    if (isEqual(buttonProps, labelButton)) setButtonProps(iconButton);
    if (isEqual(buttonProps, iconButton)) setButtonProps(labelButton);

    actions.app.changeTheme(theme === 'dark' ? 'light' : 'dark');

    logger.info(`Changing theme in ${navigation.getId()}`);
  };

  const text = '{{pascalCase name}}';

  return (
    <SafeAreaView insets={SaveAreaInset.BOTTOM} style={[$container, $style]}>
      <ScrollView>
        <View flex padding-15>
          <Text h1 text>
            H1 {text}
          </Text>
          <Text h2 secondary>
            H2 {text}
          </Text>
          <Text h3 success>
            H3 {text}
          </Text>
          <Text h4 warning>
            H4 {text}
          </Text>
          <Text h5 info>
            H5 {text}
          </Text>
          <Text h6 error>
            H6 {text}
          </Text>
          <Text caption>Caption</Text>
          <Text overline>Overline</Text>
          <Text subtitle>Subtitle</Text>
          <Text subtitle2>Subtitle 2</Text>
          <Text body>Body</Text>
          <Text body2>Body 2</Text>
          <Text p>Series Heading</Text>
          <Button
            onPress={onChangeTheme}
            marginT-15
            bg-primary
            enableShadow
            iconSource={PaletteIcon}
            animateLayout
            iconOnRight
            animateTo="right"
            {...buttonProps}
          />
        </View>
      </ScrollView>
    </SafeAreaView>
  );
}

export default {{pascalCase name}};
